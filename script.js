
import mapboxgl from 'mapbox-gl';
import {featureFilter} from "mapbox-gl/dist/style-spec/index.es";


// map.on('style.load', () => {
//     map.setFog({}); // Set the default atmosphere style
// });


mapboxgl.accessToken = 'pk.eyJ1Ijoib2drZGV2IiwiYSI6ImNsZHVzaXY2djA4eWozc3Fsbzl5M25qcjUifQ.TQMXg0p1ZjSkcUdpTUsNlQ';
let map = null;
 map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/satellite-v9',
    projection: 'globe', // Display the map as a globe, since satellite-v9 defaults to Mercator
    zoom: 2,
    minZoom: 2,
    center: [-45.37257355955616, -21.968033674683838],
});

map.on('load', () => {

    map.touchZoomRotate.enable({around: 'center'});

// Add a GeoJSON source containing place coordinates and information.
    map.setFog({
        color: 'rgb(100, 100, 100)', // Lower atmosphere
        'high-color': 'rgb(50, 50, 50)', // Upper atmosphere
        'horizon-blend': 0.02, // Atmosphere thickness (default 0.2 at low zooms)
        'space-color': 'rgb(0, 0, 0)', // Background color
        'star-intensity': 0.2 // Background star brightness (default 0.35 at low zoooms )
    });

    initialPoints = {};
    var initialPoints = {
        "type": "FeatureCollection",
        "features" : [
            {"type":"Feature","properties":{
                    "place":"santa-cruz-area",
                    "name":"Province of Santa Cruz",
                    "country":"argentina",
                    "continent":"South America",
                },
                "geometry":{"coordinates":[-70.27305275992737,-48.64001645604238],"type":"Point"}},
            {"type":"Feature","properties":{
                    "place" : "torres-del-paine-area",
                    "name":"Torres del Paine",
                    "country":"chile",
                    "continent":"South America",
                },
                "geometry":{"coordinates":[-73.17793051664984,-50.96870690754686],"type":"Point"}},
            {"type":"Feature","properties":{
                    "place":"ibera-wetlands-area",
                    "name":"Ibera Wetlands",
                    "country":"argentina",
                    "continent":"South America",
                },
                "geometry":{"coordinates":[-57.131741920441584,-28.15269934779628],"type":"Point"}},
            {"type":"Feature","properties":{
                    "place":"andalucia-area",
                    "name":"Andalucia/Castilla de la Mancha",
                    "country":"spain",
                    "continent":"Europe",
                }
                ,"geometry":{"coordinates":[-3.886375512792597,38.03129448745335],"type":"Point"}},
            {"type":"Feature",
                "properties":{
                "place":"aguapey-river-basin",
                 "name":"Aguapey River Basin",
                "country":"Argentina",
                "continent":"South America",
                },
                "geometry":{"coordinates":[-56.52111153733962,-28.299430332602597],"type":"Point"}},
            {"type":"Feature",
                "properties":{
                "place":"bahia-lomas",
                "name":"Bahia Lomas",
                "country":"Argentina",
                "continent":"South America",
                },
                "geometry":{"coordinates":[-69.07485463220233,-52.55744532275889],"type":"Point"}},
            {"type":"Feature",
                "properties":{
                "place":"peninsula-valdes",
                "name":"Peninsula Valdes",
                "country":"Argentina",
                "continent":"South America",
                },
                "geometry":{"coordinates":[-63.89775737980409,-42.532684755412276],"type":"Point"}},
            {"type":"Feature",
                "properties":{
                "place":"lago-la-plata",
                "name":"Lago la Plata",
                "country":"Argentina",
                "continent":"South America",
                },
                "geometry":{"coordinates":[-71.77123429715127,-44.85615759403982],"type":"Point"},"id":14}

        ]
    };
    polygons = {};
    var polygons = {
        "type": "FeatureCollection",
        "features": [
            {
                "type": "Feature",
                "properties": {
                    "place": "santa-cruz-area",
                    "country" : "argentina",
                    "continent" : "South America",

                },
                "geometry": {
                    "type": "Polygon",
                    "coordinates": [
                        [
                            [
                                -67.598876953125,
                                -46.01985337287632
                            ],
                            [
                                -71.60888671875,
                                -45.98169518512228
                            ],
                            [
                                -71.7626953125,
                                -46.10370875598025
                            ],
                            [
                                -71.9384765625,
                                -46.13417004624325
                            ],
                            [
                                -71.78466796874999,
                                -46.21785176740299
                            ],
                            [
                                -71.641845703125,
                                -46.68713141244413
                            ],
                            [
                                -71.883544921875,
                                -46.8000594467873
                            ],
                            [
                                -71.97143554687499,
                                -46.8000594467873
                            ],
                            [
                                -71.8505859375,
                                -47.21210577562242
                            ],
                            [
                                -72.037353515625,
                                -47.19717795172787
                            ],
                            [
                                -72.037353515625,
                                -47.353710619513606
                            ],
                            [
                                -72.1142578125,
                                -47.31648293428332
                            ],
                            [
                                -72.35595703125,
                                -47.46523622438362
                            ],
                            [
                                -72.322998046875,
                                -47.613569753973955
                            ],
                            [
                                -72.520751953125,
                                -47.76886840424206
                            ],
                            [
                                -72.564697265625,
                                -47.95314495015593
                            ],
                            [
                                -72.44384765625,
                                -47.98992166741417
                            ],
                            [
                                -72.257080078125,
                                -48.34164617237459
                            ],
                            [
                                -72.432861328125,
                                -48.52388120259334
                            ],
                            [
                                -72.57568359375,
                                -48.451065619532145
                            ],
                            [
                                -72.5537109375,
                                -48.78515199804314
                            ],
                            [
                                -72.83935546875,
                                -48.98021698537499
                            ],
                            [
                                -72.894287109375,
                                -48.944151234187935
                            ],
                            [
                                -73.135986328125,
                                -49.2032427441791
                            ],
                            [
                                -73.0810546875,
                                -49.274972875996376
                            ],
                            [
                                -73.47656249999999,
                                -49.210420445650286
                            ],
                            [
                                -73.5205078125,
                                -49.26780455063752
                            ],
                            [
                                -73.41064453125,
                                -49.35375571830991
                            ],
                            [
                                -73.54248046875,
                                -49.55372551347578
                            ],
                            [
                                -73.45458984375,
                                -49.80963156356309
                            ],
                            [
                                -73.564453125,
                                -49.95121990866204
                            ],
                            [
                                -73.45458984375,
                                -49.96535590991309
                            ],
                            [
                                -73.531494140625,
                                -50.14170587960566
                            ],
                            [
                                -73.41064453125,
                                -50.24017888479702
                            ],
                            [
                                -73.42163085937499,
                                -50.34546040860478
                            ],
                            [
                                -73.36669921875,
                                -50.57626025689926
                            ],
                            [
                                -73.17993164062499,
                                -50.625073063414355
                            ],
                            [
                                -73.1689453125,
                                -50.79899141148548
                            ],
                            [
                                -72.79541015625,
                                -50.639010281258706
                            ],
                            [
                                -72.59765625,
                                -50.68775800806201
                            ],
                            [
                                -72.4658203125,
                                -50.59718623058701
                            ],
                            [
                                -72.279052734375,
                                -50.67383524992133
                            ],
                            [
                                -72.3779296875,
                                -50.736455137010644
                            ],
                            [
                                -72.2900390625,
                                -51.03448563297413
                            ],
                            [
                                -72.388916015625,
                                -51.020666012558095
                            ],
                            [
                                -72.388916015625,
                                -51.13800148806255
                            ],
                            [
                                -72.26806640624999,
                                -51.26878915771343
                            ],
                            [
                                -72.3779296875,
                                -51.35806157319091
                            ],
                            [
                                -72.301025390625,
                                -51.39920565355377
                            ],
                            [
                                -72.421875,
                                -51.570241445811234
                            ],
                            [
                                -72.2900390625,
                                -51.618016548773696
                            ],
                            [
                                -72.2900390625,
                                -51.692990211491846
                            ],
                            [
                                -71.927490234375,
                                -51.923943445544694
                            ],
                            [
                                -72.02636718749999,
                                -51.971345808851716
                            ],
                            [
                                -69.9609375,
                                -51.99841038239032
                            ],
                            [
                                -69.521484375,
                                -52.15371445951162
                            ],
                            [
                                -69.169921875,
                                -52.146973340644706
                            ],
                            [
                                -68.895263671875,
                                -52.274880130680536
                            ],
                            [
                                -68.4228515625,
                                -52.35547370875268
                            ],
                            [
                                -68.35693359375,
                                -52.32862548843016
                            ],
                            [
                                -68.9501953125,
                                -51.68617954855623
                            ],
                            [
                                -68.9501953125,
                                -51.52241608253253
                            ],
                            [
                                -69.18090820312499,
                                -50.965346321637696
                            ],
                            [
                                -69.3896484375,
                                -51.082821861609766
                            ],
                            [
                                -69.136962890625,
                                -50.847572953653874
                            ],
                            [
                                -68.93920898437499,
                                -50.324422739309384
                            ],
                            [
                                -68.367919921875,
                                -50.13466432216695
                            ],
                            [
                                -68.64257812499999,
                                -49.83798245308484
                            ],
                            [
                                -68.291015625,
                                -50.12057809796008
                            ],
                            [
                                -67.752685546875,
                                -49.85215166776998
                            ],
                            [
                                -67.6318359375,
                                -49.26780455063752
                            ],
                            [
                                -67.598876953125,
                                -49.0738659012854
                            ],
                            [
                                -67.203369140625,
                                -48.821332549646634
                            ],
                            [
                                -67.159423828125,
                                -48.64016871811908
                            ],
                            [
                                -66.873779296875,
                                -48.60385760823253
                            ],
                            [
                                -66.46728515624999,
                                -48.400032496106846
                            ],
                            [
                                -66.478271484375,
                                -48.327039130634766
                            ],
                            [
                                -66.37939453125,
                                -48.363548888986884
                            ],
                            [
                                -66.192626953125,
                                -48.12943437745314
                            ],
                            [
                                -65.93994140625,
                                -48.08541857551197
                            ],
                            [
                                -66.02783203125,
                                -48.01197512670994
                            ],
                            [
                                -65.9619140625,
                                -47.93106634750977
                            ],
                            [
                                -65.841064453125,
                                -47.975214123416166
                            ],
                            [
                                -65.775146484375,
                                -47.91634204016117
                            ],
                            [
                                -65.906982421875,
                                -47.75409797968002
                            ],
                            [
                                -65.709228515625,
                                -47.36115300722623
                            ],
                            [
                                -65.753173828125,
                                -47.18224592701489
                            ],
                            [
                                -65.928955078125,
                                -47.055154085503474
                            ],
                            [
                                -66.192626953125,
                                -47.070121823833084
                            ],
                            [
                                -66.632080078125,
                                -47.04766864046081
                            ],
                            [
                                -67.39013671875,
                                -46.59661864884464
                            ],
                            [
                                -67.576904296875,
                                -46.36967413462374
                            ],
                            [
                                -67.6318359375,
                                -46.21785176740299
                            ],
                            [
                                -67.598876953125,
                                -46.01985337287632
                            ]
                        ]
                    ]
                }
            },
            {
                "type":"Feature",
                "properties":{
                    "place":"andalucia-area",
                    "country":"Spain",
                    "continent" : "Europe",
                },
                "geometry":{"coordinates":[[[-7.420304238197446,37.17501674294009],[-7.112516088033146,37.223887187121264],[-6.6247294143444435,37.06639103702412],[-6.346876245788309,36.78998454963704],[-6.414795909213069,36.71577704340035],[-6.390097849785803,36.6315884689314],[-6.173989829797307,36.33869080332006],[-6.087546621801209,36.179368390302514],[-5.9084856909542225,36.189335558675964],[-5.815867965114677,36.0945962720794],[-5.630632519410597,36.009732608895476],[-5.408349984565007,36.10457421580722],[-5.346604835996175,36.19431867023921],[-5.223114538859761,36.3536106167805],[-4.96378491487377,36.48776020265552],[-4.642710142318975,36.502651402846155],[-4.364855776887708,36.710824416061755],[-4.0889452702561755,36.74051794489746],[-3.8666627350392275,36.7553603978448],[-3.7802195270442667,36.70092401384464],[-3.551762477341555,36.71577412735395],[-3.4653192693466224,36.681119398854946],[-3.348003487067274,36.730621370886325],[-2.9274579027315895,36.72145772819562],[-2.8595381635592787,36.657091146099646],[-2.6743027178551984,36.6719497250635],[-2.5693359652889285,36.79565961498163],[-2.359402460157554,36.820377664881946],[-2.198865073879574,36.721457600957095],[-2.1247708955988287,36.73630374582045],[-1.9024883607532388,36.97345136576378],[-1.791347093329847,37.21969678508887],[-1.6061116476257666,37.32288103574179],[-1.6802058259076205,37.40630752348379],[-1.9024883607532388,37.53372146662555],[-2.001280598462415,37.84155352586123],[-2.198865073879574,37.90978701886161],[-2.3347044007302316,38.0120187048598],[-2.0630257470300535,38.27424610912027],[-1.928956437213401,38.30301552535232],[-1.6881502523787901,38.36113713786824],[-1.5523109255292695,38.332082146623065],[-1.4967402918175878,38.36113713786824],[-1.4411696581058777,38.54971031706097],[-1.379424509538211,38.67997207158126],[-1.1447929449795708,38.7185227087607],[-0.885463320992443,38.636577770350556],[-0.910161380419737,38.920572439162214],[-1.1077458558380613,38.94458778034718],[-1.2457893570870056,39.03087672728981],[-1.15934636487151,39.32285135973143],[-1.486595652282233,39.42308650074392],[-1.5483408008510366,39.51841471087354],[-1.332232780861375,39.64690053362665],[-1.2210915134391485,39.82258659871286],[-1.1284737905871225,40.00255455636312],[-1.356930840288669,40.01674240939661],[-1.4063269591432572,40.19148336839828],[-1.5174682265665922,40.19148336839828],[-1.7767978505526116,40.379887343166615],[-1.6656562928183973,40.577146220021774],[-1.5051189065404174,40.577146220021774],[-1.548340510537912,40.86727757895579],[-1.9682075208018261,41.17473633158065],[-2.0916978179382966,41.09102630274279],[-2.412772689317052,41.063099110153956],[-2.85733775900826,41.27690338455989],[-3.3142518584136837,41.2629808982615],[-3.443916670406111,41.12359277942292],[-3.456265700120298,40.755118580919884],[-3.2031105909903204,40.506763109085625],[-3.0796202938538784,40.262196464995526],[-3.0796202938538784,40.082913462780056],[-3.406869581265738,40.04983600116398],[-3.7094208092491954,39.91262975618153],[-3.585930512112725,40.111252788208645],[-4.153985878940404,40.30458884129433],[-4.524456770349758,40.266908041791766],[-4.907276691472163,40.15845876685853],[-5.364190790877586,40.14430041642564],[-5.401237880017931,39.92683628092726],[-5.314794672022998,39.808358538024834],[-5.16043180060214,39.81784428629388],[-5.216002434313822,39.58030806207037],[-4.913451206329256,39.370600397092346],[-4.623249008058906,39.45646630176935],[-4.789960909192843,39.198551490480554],[-4.913451206329256,39.05485473793803],[-4.907276691472163,38.785837091288045],[-5.067814077750114,38.75213820137873],[-5.586473325722039,38.40459801889796],[-5.512379147440157,38.23989782723561],[-5.703789108002525,38.19623810316975],[-5.944595187418315,38.00674342443216],[-6.142179662836611,37.972679559064886],[-6.3953347719655085,38.04565418581922],[-6.876946930798198,38.225347496727835],[-7.185672673638749,37.99701250544756],[-7.5437945353338876,37.572469298527466],[-7.420304238197446,37.17501674294009]]],"type":"Polygon"}},
                {
                    "type":"Feature",
                    "properties":{
                        "place":"torres-del-paine-area",
                        "country":"chile",
                        "continent":"South America",

                    },
                    "geometry":{"coordinates":[[[-72.72444560541972,-50.934621448501524],[-72.70024577919477,-50.93221516453114],[-72.7095481575007,-50.892224860064694],[-72.7129308405209,-50.880487852474474],[-72.72223321882683,-50.87621911653744],[-72.7235017249596,-50.866879893339664],[-72.74802617685722,-50.86474495100347],[-72.75394587214296,-50.86127546118187],[-72.77576917560744,-50.805194547453695],[-72.88020951386119,-50.792901057006524],[-72.8907803982999,-50.77846544139737],[-72.92883558227938,-50.78220843639777],[-72.94744033889124,-50.7546636807828],[-72.98422701673792,-50.74984836932966],[-73.01551683467646,-50.760013445875714],[-73.04680665261445,-50.7624206406569],[-73.07259961064484,-50.78808968037599],[-73.09796973329765,-50.77338518324999],[-73.11995717293024,-50.77819807314749],[-73.18126830267452,-50.80759941731876],[-73.20917545279538,-50.818286228722926],[-73.24260405496581,-50.82340412724006],[-73.47301346532404,-50.885263336227325],[-73.41739400004974,-50.99874430186487],[-73.54163812739367,-51.07838825595316],[-73.48651280829311,-51.28999408182149],[-73.37355182755559,-51.28583419366587],[-73.22727720614053,-51.2340714102336],[-73.18824377206468,-51.24628998977803],[-73.16069351699277,-51.2539543168489],[-73.09739677465006,-51.24895120903634],[-73.09108066686134,-51.25238889817539],[-73.08119458510414,-51.25015442946927],[-73.08421533230758,-51.24551326289661],[-73.06609084908683,-51.238120808391756],[-73.06334471526588,-51.238120808391756],[-73.05812706100512,-51.23485399654314],[-73.04219948484096,-51.231758908183416],[-73.04000257778435,-51.22986736280422],[-73.03148956293761,-51.23313452871255],[-73.03148956293761,-51.23794887670886],[-73.0295672692628,-51.239840089877326],[-73.02599729529501,-51.23691727311871],[-73.01913196074196,-51.2351978823978],[-73.01528737339164,-51.24069970652407],[-73.01199201280637,-51.24138738827616],[-73.00897126560292,-51.23794887670886],[-73.002929771196,-51.23794887670886],[-72.99826134369953,-51.23932431217858],[-72.99633905002474,-51.231071082496314],[-72.98727680841436,-51.23365037580935],[-72.98111784807168,-51.228086177329835],[-72.97601874153956,-51.22803716203676],[-72.97166060103473,-51.23288875355736],[-72.96899729364158,-51.22606605613926],[-72.97516187467735,-51.22291174177064],[-72.95676083975555,-51.21244758999173],[-72.85092850314429,-51.21357523420688],[-72.84462600205845,-51.21391188476422],[-72.8395449159115,-51.21455457444751],[-72.83856778396029,-51.214309741339854],[-72.83886092354564,-51.214003698125204],[-72.83847007076503,-51.213636443582274],[-72.83432923739656,-51.19528320640433],[-72.83017642586374,-51.17697069791977],[-72.82724504587058,-51.16462561067512],[-72.82255482261432,-51.144308678184075],[-72.82030973284301,-51.132935131314625],[-72.81845318331641,-51.126005841020245],[-72.82153114896337,-51.123491416638785],[-72.82280142049986,-51.12079285772099],[-72.81928374547518,-51.12079285772099],[-72.82033161443981,-51.11400509873247],[-72.81544186962267,-51.10512587683613],[-72.80355790494549,-51.099456990450115],[-72.78354757691024,-51.07063148925523],[-72.76770996620682,-51.03662015994485],[-72.77203726995864,-51.0266906773852],[-72.78145210119513,-51.02051127122286],[-72.7849022567412,-51.01995949847437],[-72.79484338289102,-51.01863521708493],[-72.7951942461668,-51.0155818686393],[-72.7930305892989,-51.01363203492721],[-72.79648077263333,-51.00914341860589],[-72.79320604754699,-51.004139211749376],[-72.79034066412757,-50.99431320700582],[-72.79402473983505,-50.988828865686614],[-72.79512845743137,-50.98092552841134],[-72.79579221485298,-50.978209178888655],[-72.79263936747451,-50.97256702164996],[-72.77886640261075,-50.97120862215424],[-72.75795800752965,-50.961385222476565],[-72.73704965123096,-50.946541594685925],[-72.72800755722814,-50.943614122624425],[-72.72444560541972,-50.934621448501524]]],"type":"Polygon"},
                },
            {
                "type":"Feature",
                "properties":{
                     "place":"ibera-wetlands-area",
                    "country":"argentina",
                     "continent" : "South America",
                },
                "geometry":{"coordinates":[[[-58.52541116467003,-28.918022054059975],[-58.520544834704594,-28.96293131256357],[-58.49355882307793,-28.97879975566805],[-58.38163323387279,-28.9768647099569],[-58.354647222246086,-28.963318376708557],[-58.322352487020694,-28.973768561543267],[-58.22325631317874,-28.972220452594122],[-57.93814276513031,-28.8965848313223],[-57.69175597673478,-28.764462064415113],[-57.53691820510636,-28.703170958428615],[-57.48869728242562,-28.688424697530905],[-57.436448392693435,-28.683359076695318],[-57.389111937715825,-28.66006953355094],[-57.34929651072598,-28.648423131429283],[-57.28028310394306,-28.61153432642861],[-57.21348166532594,-28.557536829738382],[-57.179859749201285,-28.584733279486542],[-57.159952035705814,-28.574632561667244],[-57.13606277951202,-28.532665354128824],[-57.086514278326604,-28.49962314609273],[-57.058201085800675,-28.48834779380517],[-56.95998969922472,-28.419503168983667],[-56.91044161230401,-28.387983057947586],[-56.83390751375606,-28.352560394300554],[-56.76226864462738,-28.26304307615176],[-56.73174348393508,-28.170655386477236],[-56.70170427881203,-28.142610760848022],[-56.69418358704699,-28.126615785298654],[-56.67206390538573,-28.10281396489855],[-56.64552028739227,-28.06729651592451],[-56.62738214843043,-28.04152925982371],[-56.587930620455666,-28.000097849098232],[-56.530419448136655,-27.957903709961847],[-56.496210253035656,-27.825139075881793],[-56.49258016055006,-27.593940444773125],[-56.53903149203845,-27.555118398203447],[-56.59300351529183,-27.545704924722358],[-56.62883739958282,-27.569237095372664],[-56.64918750671103,-27.5896275624919],[-56.70138995543191,-27.636668013859307],[-56.77839834269601,-27.66465574559537],[-56.922618667127054,-27.657210925672246],[-56.97066627890503,-27.645999980909252],[-57.05383628195145,-27.58328023573796],[-57.15072048762704,-27.6236601903436],[-57.16879257537083,-27.640125336310447],[-57.18426167695415,-27.688294914120696],[-57.21642466632869,-27.726058408458222],[-57.30780635018522,-27.824445476709954],[-57.375793958488586,-27.896241188695242],[-57.42692391312623,-27.92593845149709],[-57.460770502816416,-27.95096266711503],[-57.48189417150137,-27.975557204494187],[-57.50301828421547,-28.011802554546556],[-57.52726309930661,-28.08849238526532],[-57.55414833367007,-28.16766676838182],[-57.584117059734,-28.245958640282367],[-57.61572338572532,-28.30322880845587],[-57.616449976679874,-28.308186524901693],[-57.69982522416244,-28.36174702298114],[-57.75886022107524,-28.410008400381905],[-57.80500011697738,-28.450103607036517],[-57.86294498978907,-28.501996120019122],[-57.94940820940123,-28.573486149776805],[-58.020431493585164,-28.624361210838266],[-58.13570965499463,-28.675551148158128],[-58.27981550208894,-28.740755226393794],[-58.32177559395916,-28.78151974669749],[-58.41659474080187,-28.828952172826483],[-58.49688199874063,-28.89481231012779],[-58.52541116467003,-28.918022054059975]]],"type":"Polygon"}},
            {"type":"Feature","properties":
                    {"place":"aguapey-river-basin","continent":"South America"},
                "geometry":{"coordinates":[[[-56.39720246136214,-27.945110513518728],[-56.44866987510834,-28.032370231305563],[-56.54954600605123,-28.079606401332917],[-56.67924388869119,-28.168571948161038],[-56.72865260588782,-28.242955718492347],[-56.765709143784775,-28.384323119072448],[-56.71835912313844,-28.456746248819456],[-56.64556285399033,-28.579792105056463],[-56.64556285399033,-28.69385896561878],[-56.67092184345093,-28.768908381511487],[-56.63288335926059,-28.855009711563653],[-56.664582096086065,-28.899421244898086],[-56.601184622434545,-29.010366935420365],[-56.461710182655764,-28.952135269310375],[-56.517318608691326,-28.741436273166634],[-56.450751261357695,-28.46313324775391],[-56.22886010357881,-28.223204797344394],[-56.37238165086593,-28.24024420909436],[-56.23695431408869,-27.983435916189073],[-56.39720246136214,-27.945110513518728]]],"type":"Polygon"}},
            {"type":"Feature","properties":
                    {"place":"peninsula-valdes", "continent":"South America"},
                "geometry":{"coordinates":[[[-64.62046217476252,-42.42697411441296],[-64.63015018687844,-42.49844395224354],[-64.5939783991759,-42.496598723182096],[-64.57565584208854,-42.491300639592716],[-64.53865146208817,-42.49818806073884],[-64.51853257375187,-42.50269096374748],[-64.50307507633386,-42.50048481265828],[-64.49553049400375,-42.499690178117724],[-64.45241859497462,-42.50710637443274],[-64.44451474681894,-42.50896028605478],[-64.43661089866377,-42.510284474978285],[-64.43158117711022,-42.510814142692695],[-64.40212137943995,-42.51796421752981],[-64.35721315128445,-42.53596818886371],[-64.35577608798316,-42.53173242713974],[-64.34392031575013,-42.5325266543457],[-64.31841244215775,-42.54787972847848],[-64.31014932817696,-42.55978899555437],[-64.3137419864292,-42.567727244376734],[-64.31086785982761,-42.57196056407448],[-64.30907153070126,-42.57831000490499],[-64.31014932817696,-42.584658799265945],[-64.30691593574979,-42.588361964095554],[-64.29865280930746,-42.582807141892346],[-64.29028319486507,-42.577780917062434],[-64.27950520410985,-42.57539994020323],[-64.26999406201362,-42.580955429884185],[-64.25706049230489,-42.59841231799998],[-64.26388654298432,-42.6021146657258],[-64.26843008217317,-42.60914064665139],[-64.27597466450324,-42.61548630087603],[-64.2691486138238,-42.621302582614916],[-64.26268182896891,-42.61918763393176],[-64.2511853225615,-42.61971637783778],[-64.24112587945433,-42.61442873673663],[-64.22567744896857,-42.61601507621055],[-64.2148994742113,-42.62209566984998],[-64.21238461343476,-42.63081896267286],[-64.22028846158993,-42.63663381210096],[-64.22675524644431,-42.65090432087629],[-64.2321442438869,-42.654867766630545],[-64.23681469961492,-42.66358646596124],[-64.2411258895178,-42.66517155267555],[-64.24435928194501,-42.67547363120602],[-64.2508260667999,-42.68154841552737],[-64.24543707942071,-42.71191342847784],[-64.26121746229857,-42.74409028295997],[-64.25367287996846,-42.767040299068256],[-64.23966174470148,-42.78681805685605],[-64.22744670664288,-42.80026326748679],[-64.21199827615712,-42.809752245718485],[-64.1969091114969,-42.827144925513686],[-64.19367571906973,-42.834522160132565],[-64.18038288353542,-42.84663999111344],[-64.15882693402082,-42.85875544543568],[-64.15667133906939,-42.86744550290126],[-64.1505638200401,-42.86797213373707],[-64.14409703518571,-42.87587105711647],[-64.12685227557405,-42.878767075725705],[-64.10385926275819,-42.880083402890286],[-64.08906800725704,-42.875209812108594],[-64.08044562745125,-42.87494652812853],[-64.0445190449266,-42.86599420447523],[-64.01793337385851,-42.86283425081678],[-64.00284420919829,-42.858620727668864],[-63.925961322595484,-42.84176375966372],[-63.91913526745378,-42.84439796552919],[-63.90426427727937,-42.837021909146024],[-63.87947493533714,-42.83596811502455],[-63.870493289706246,-42.83623156523986],[-63.8694154922305,-42.832279694083724],[-63.847141011065276,-42.82753711512329],[-63.84282982116238,-42.82859105300616],[-63.83672230213307,-42.82490219179579],[-63.8241479982494,-42.82437519365308],[-63.81049576555813,-42.82305740148225],[-63.809417968082386,-42.819895250882084],[-63.763072676625555,-42.81119850283006],[-63.74007966381019,-42.81172561328507],[-63.739361132159544,-42.81436109817662],[-63.724631233324416,-42.81119850283006],[-63.714931056042886,-42.80381848476595],[-63.707027207887194,-42.80434565811355],[-63.70127895468346,-42.79696482246338],[-63.68008227099399,-42.791955896835354],[-63.675771081091085,-42.78931945735054],[-63.66175971390659,-42.77956365480431],[-63.65098173914882,-42.777981487903745],[-63.6452334859451,-42.7711249641774],[-63.63301844788653,-42.7658501985964],[-63.62762946050786,-42.754771728813566],[-63.63337771371209,-42.74738498183822],[-63.63229991623636,-42.73946963316999],[-63.63732963778993,-42.73260884688053],[-63.634455511187824,-42.72126049613982],[-63.642718625168584,-42.71386975633022],[-63.637688903615,-42.69882160180184],[-63.62311704582086,-42.67839732148267],[-63.617728059686215,-42.66175543638103],[-63.61460964800126,-42.65356757046446],[-63.60850212897196,-42.644847466338305],[-63.60419093906903,-42.62793226484311],[-63.58394722836492,-42.61322896706666],[-63.58322869685014,-42.60556094208273],[-63.58827291633922,-42.598949818143716],[-63.583961726436286,-42.594189374589156],[-63.59042851129068,-42.585460950248255],[-63.588632182164275,-42.577789507728035],[-63.591865574591466,-42.56958795642897],[-63.60300281517432,-42.548682352531955],[-63.60264354934927,-42.520356000139394],[-63.599050891096454,-42.514000661713766],[-63.599410156921564,-42.50711498237182],[-63.60228428357544,-42.5049961555806],[-63.60551761824925,-42.452797418619404],[-63.60766812040529,-42.4189738865329],[-63.60084206972536,-42.36219079400396],[-63.59796794312376,-42.33085852027304],[-63.60987453873548,-42.29872985123146],[-63.63855659947987,-42.2555886966384],[-63.67340538452976,-42.22047860941781],[-63.69460206821924,-42.18641380960152],[-63.70322444802507,-42.16351620722977],[-63.711846832696125,-42.15019983376626],[-63.73743103137677,-42.098126347647145],[-63.757909183415634,-42.07599680941931],[-63.772639082250734,-42.07119661389584],[-63.80209887992096,-42.07039654601317],[-63.8574258170087,-42.07866342783958],[-63.942256763192646,-42.10396889251136],[-63.94549015561981,-42.11143184980104],[-63.9548310671201,-42.111165330767264],[-63.973153624207995,-42.11676199569794],[-63.98213526983888,-42.13168401933267],[-64.0015356244025,-42.13807809643433],[-64.01087653585847,-42.145803411634816],[-64.02955835877142,-42.145803411634816],[-64.02991762459654,-42.15299509916818],[-64.03961780187858,-42.1601859696328],[-64.0525513715873,-42.16444684063855],[-64.0561440298396,-42.16151752264573],[-64.0604552197425,-42.168174867389354],[-64.0798555743061,-42.176162756365876],[-64.10967488285799,-42.18335084240474],[-64.13230862984824,-42.19213535637947],[-64.17182787062565,-42.19985407303951],[-64.22320288363551,-42.208902402336456],[-64.33493455528718,-42.22832531938251],[-64.37840572014191,-42.23736957026045],[-64.37732792266617,-42.23923146103103],[-64.36583141625825,-42.24082732368121],[-64.35792756810307,-42.245614669463535],[-64.34571253004448,-42.244816803725804],[-64.32990483373361,-42.24986978298084],[-64.32487511218004,-42.24880603150944],[-64.31050447917052,-42.25252908317614],[-64.305834023442,-42.24827414904704],[-64.2968523778111,-42.24986978298084],[-64.2882299980053,-42.24401892789766],[-64.28068541567518,-42.24614657434999],[-64.27134450421872,-42.246944423270264],[-64.27314082273178,-42.243221035405654],[-64.26008995828086,-42.239141884745045],[-64.25470097090172,-42.23967384420123],[-64.24895271769802,-42.23621602757292],[-64.22991162895997,-42.24233357421508],[-64.21805585672692,-42.24286550676376],[-64.20727788196969,-42.24259954104962],[-64.18356633750315,-42.24898240874295],[-64.17566248934796,-42.24738675236258],[-64.16057332468729,-42.243663397178494],[-64.15446580565849,-42.23940786503333],[-64.1390173751727,-42.24392935840803],[-64.13470618526978,-42.23940786503333],[-64.10812051420166,-42.251109887798094],[-64.0987796027452,-42.25270544999936],[-64.07830145070633,-42.26227797558011],[-64.06141579340658,-42.27557051975936],[-64.05171561612501,-42.288860480390056],[-64.04524883127065,-42.3122440023387],[-64.04740442622209,-42.31622896367163],[-64.05099708447436,-42.322338747650846],[-64.05961946428071,-42.32552622552802],[-64.0700381732124,-42.33030713954891],[-64.06931964156226,-42.33668112635177],[-64.04524883127065,-42.347568526064386],[-64.04522755760006,-42.358480032576054],[-64.05025727915363,-42.36325844136821],[-64.06067598808585,-42.38316456636427],[-64.07109469733014,-42.38528751457585],[-64.07612441888318,-42.39032922744458],[-64.08510606451458,-42.39935022929506],[-64.09516550762122,-42.4022685110912],[-64.10378788742705,-42.40943099095583],[-64.12031411538854,-42.427201019630644],[-64.14043300160232,-42.427201019630644],[-64.15408510296167,-42.42163185097916],[-64.16845573597173,-42.42083621507237],[-64.17707811577758,-42.41738834280917],[-64.20150819189423,-42.41606218761121],[-64.21659735655443,-42.42163185097916],[-64.22593826801094,-42.41579695320611],[-64.28881002077117,-42.415000611609614],[-64.30066579300417,-42.40226787931182],[-64.31036597028572,-42.405186025407176],[-64.32006614756727,-42.411817670836164],[-64.33299971727654,-42.41234817218261],[-64.34485548950953,-42.424018066561054],[-64.35958538834468,-42.42640482286108],[-64.37395602135422,-42.42163121939406],[-64.38760812271362,-42.42826112605038],[-64.41419379378173,-42.429852199318255],[-64.42281617358805,-42.43807210115878],[-64.45191671984735,-42.43674639002906],[-64.47708701035266,-42.43762753984095],[-64.48390416052037,-42.42940527821113],[-64.47959297061746,-42.41853206178966],[-64.48462269217103,-42.41322736948054],[-64.49073021120033,-42.417736386548825],[-64.4925265403262,-42.42542749095759],[-64.49288580615179,-42.42940527821113],[-64.50725643916132,-42.42860974095332],[-64.5194714772199,-42.42754900890374],[-64.53815330013236,-42.425162296165865],[-64.54174595838514,-42.42091902693504],[-64.54569788518815,-42.42622306787034],[-64.55647585994546,-42.43179182867469],[-64.57264282208186,-42.42675344735671],[-64.57156502460614,-42.42144945056378],[-64.57946887276132,-42.421184238944875],[-64.5844985943149,-42.427549008172896],[-64.59922849315,-42.42410150505063],[-64.61180279703368,-42.42595787644404],[-64.61862884771313,-42.4182668371007],[-64.62046217476252,-42.42697411441296]]],"type":"Polygon"}},
            {"type":"Feature","properties":{"place":"lago-la-plata", "continent":"South America"},
                "geometry":{"coordinates":[[[-71.66806234950059,-44.854609256146965],[-71.67572556420194,-44.8479569336756],[-71.67395673492602,-44.84607580421949],[-71.6642281739076,-44.840118488994555],[-71.65914278973838,-44.83870745568604],[-71.66511258854526,-44.83212217668116],[-71.66975576932903,-44.830867753769965],[-71.68070613922222,-44.831651772333196],[-71.68313827947732,-44.837609962964386],[-71.68977138926272,-44.838550673593566],[-71.69662560270787,-44.83729638934235],[-71.70104767589795,-44.83980493054256],[-71.71387168814996,-44.83525811920057],[-71.7238213528281,-44.83572849563197],[-71.7289067369967,-44.837609962964386],[-71.7472583413538,-44.83337657435718],[-71.75608176609262,-44.83305208663491],[-71.76404149783512,-44.830856861822014],[-71.77642330276834,-44.833365683354096],[-71.7775288229102,-44.83179768189523],[-71.78615186563125,-44.83117046968595],[-71.78858400588632,-44.83446325763181],[-71.78261420707945,-44.83587439487265],[-71.79212166443814,-44.838853348903584],[-71.79256387175758,-44.84198892361053],[-71.80273464009542,-44.84167537381858],[-71.80980995719968,-44.84590815202495],[-71.81290540843266,-44.84245924509797],[-71.82285507311143,-44.836501555888574],[-71.82440279872762,-44.84120504593196],[-71.82705604264177,-44.845124327672856],[-71.83634239634137,-44.84841631828113],[-71.83567908536283,-44.85311883564963],[-71.83899564025552,-44.85703730682745],[-71.8381112256179,-44.86205256086436],[-71.84120667685087,-44.86408988303251],[-71.84695537199866,-44.863306306114815],[-71.84939967673682,-44.86625177739434],[-71.84845084835034,-44.868672680850295],[-71.85205639621769,-44.87190039374178],[-71.85680053814833,-44.87297625781418],[-71.86287303981918,-44.87109348248851],[-71.86913530716744,-44.87297625781418],[-71.86894554149055,-44.875934780311894],[-71.88461471896608,-44.870830666544315],[-71.89106675199112,-44.86598893934189],[-71.89106675199112,-44.861146804868994],[-71.89543136256752,-44.858053005736075],[-71.8969494879851,-44.85522808743004],[-71.90264245830168,-44.85280661858009],[-71.90340152101072,-44.85522808743004],[-71.90093456771577,-44.857783971874994],[-71.90921577782953,-44.85509356405833],[-71.917565467627,-44.853882839532695],[-71.9190835930451,-44.85092318353104],[-71.92136078117173,-44.85119224945278],[-71.92477656336168,-44.85522808743455],[-71.92724351716518,-44.85859106970504],[-71.93900898915311,-44.85630426313041],[-71.94223500566565,-44.85280661858465],[-71.9431838400722,-44.850385047286814],[-71.95651971184044,-44.838570647835674],[-71.95936619699874,-44.840992715189415],[-71.96581823591214,-44.83776326809796],[-71.97321909732366,-44.83762870392953],[-71.97891206764025,-44.82888135892193],[-71.98434031576463,-44.82227008011161],[-71.9896537547264,-44.820654855231396],[-71.99572625639777,-44.819443406874285],[-72.00179876228466,-44.82159707423881],[-72.00824302056863,-44.82702391699567],[-72.00387840999277,-44.83025396461983],[-72.00368864431536,-44.83456041321775],[-72.0031193472837,-44.838597416525424],[-71.99401059477717,-44.8411540390036],[-71.99040504527512,-44.84075036925206],[-71.98525350260114,-44.84182870158481],[-71.98278654879763,-44.84882511158871],[-71.97956053228458,-44.85366828227962],[-71.97519592170872,-44.85528258200557],[-71.96646670055644,-44.854744487125195],[-71.95792724516008,-44.86039423262956],[-71.95375240026164,-44.86093227471568],[-71.95185474348925,-44.86496743009512],[-71.93970973020029,-44.87048167741846],[-71.93287816582043,-44.87290240297166],[-71.928513555244,-44.876802246644225],[-71.92244105357315,-44.87922270633993],[-71.91636855190181,-44.88258428700663],[-71.9165583175792,-44.88527341012641],[-71.9116244099717,-44.891323477550074],[-71.90270542307236,-44.89589421801746],[-71.8944555759554,-44.89661764328318],[-71.8893319026705,-44.8976930451977],[-71.88060268151825,-44.89392905050726],[-71.87566877391069,-44.89406348313158],[-71.86750884979011,-44.88949259761131],[-71.85877962863785,-44.88586251797035],[-71.85915915999267,-44.88855148785004],[-71.86067728582417,-44.89124033170867],[-71.86029775446993,-44.89258470666001],[-71.85991822311514,-44.89769304487714],[-71.8540354871217,-44.89796189221262],[-71.84758345409608,-44.8963487893413],[-71.84492673461463,-44.89312244784119],[-71.83316126262721,-44.89083701309491],[-71.83335102830463,-44.88855148752942],[-71.83581798210813,-44.88774480976401],[-71.83088407450062,-44.88666922181169],[-71.82061136284949,-44.879017890876796],[-71.8152979238877,-44.87995915661207],[-71.80087573241886,-44.873504453774366],[-71.7921465112666,-44.873504453774366],[-71.78930002361695,-44.872697566090295],[-71.78218877619473,-44.872697566454214],[-71.77801393129573,-44.87054580777674],[-71.76890517878921,-44.87283204870059],[-71.75846802679315,-44.866779918066094],[-71.75353411918506,-44.86113079920621],[-71.74803091454592,-44.85965117647202],[-71.74442536667857,-44.86153432608032],[-71.74252770990618,-44.86408993060208],[-71.73759380229868,-44.86785587785596],[-71.72962364385546,-44.86758688979379],[-71.72848505075937,-44.86556943719888],[-71.73099854733539,-44.862442885427136],[-71.72758276514543,-44.862442885427136],[-71.72644417108214,-44.860290743381604],[-71.72037166941075,-44.860021719969104],[-71.72511581134142,-44.86580544631978],[-71.71499635111144,-44.865318569176694],[-71.70538224474322,-44.86843752651478],[-71.69659011233746,-44.86878639558669],[-71.68460341904562,-44.86761592612288],[-71.67405569614648,-44.8658202093809],[-71.67086925714614,-44.862904891465256],[-71.66806234950059,-44.854609256146965]]],"type":"Polygon"},"id":5},
            {"type":"Feature","properties":{"place":"bahia-lomas", "continent":"South America"},
                "geometry":{"coordinates":[[[-69.3245820834581,-52.55199732290134],[-69.31891202604767,-52.57117799553636],[-69.31087096001745,-52.57628700361329],[-69.31013995401449,-52.58139541641649],[-69.28674776192567,-52.61158951842267],[-69.26481758184273,-52.62934103532689],[-69.23208379625925,-52.663902367564035],[-69.19931658424535,-52.67916105389842],[-69.16390767139428,-52.68989355188649],[-69.12718731699975,-52.70141811174221],[-69.09112268354018,-52.69744446914785],[-69.07407394772268,-52.691085888537096],[-69.05112372643,-52.68114875219911],[-69.02686206392077,-52.66325620809854],[-68.98489594498554,-52.6560971386996],[-68.97112581221009,-52.65768814433987],[-68.95210991456801,-52.65848362544573],[-68.93571689935902,-52.65808588670173],[-68.92129104597514,-52.65211937126808],[-68.89637366285737,-52.640979697039974],[-68.86489907365595,-52.63302104952555],[-68.83211304323797,-52.627449134762756],[-68.7999827334285,-52.621876510483325],[-68.77178674726916,-52.6063490298484],[-68.76391809996844,-52.597985797743085],[-68.77440962970225,-52.58762910745613],[-68.7789996739609,-52.57886384207176],[-68.76654093912445,-52.56531406556007],[-68.76105409983674,-52.54643000882374],[-68.76302126166179,-52.54244227046917],[-68.80498738059656,-52.52209916915873],[-68.86137935291575,-52.46900320925423],[-68.97416329755312,-52.46380993860636],[-69.12869661350022,-52.420612742143504],[-69.20362106924945,-52.41840171233264],[-69.34125888322994,-52.43019258023433],[-69.37509573342302,-52.441243655546934],[-69.40168183000338,-52.45229195961309],[-69.38718032277703,-52.46922731078869],[-69.38355494597066,-52.4824765201683],[-69.35817730832605,-52.506756377233614],[-69.34246734216482,-52.52440603547828],[-69.3245820834581,-52.55199732290134]]],"type":"Polygon"}},
        ]
    };
    const locationsObj = {
        "ibera-wetlands-area" : {
            "country": "argentina",
            "subtitle": "REWILDING ARGENTINA AND TOMPKINS CONSERVATION",
            "lat": "-55.002782764594525",
            "lng": "-28.54128036630737",
            "zoom":"6.5",
            "images" : ["/images/journal-ibera-slider-1.jpg","/images/journal-ibera-slider-2.jpg", "/images/journal-ibera-slider-3.jpg", "/images/journal-ibera-slider-4.jpg","/images/journal-ibera-slider-5.jpg", "/images/journal-ibera-slider-6.jpg", "/images/journal-ibera-slider-7.jpg"],
            "continent" : "South America",
            "defaultLocation" : 'Iber National Park',
            "read":"/images/journal-ibera-slider-read.jpg",
            "readLink":"/journal/jaguar-rewilding-argentina-and-tompkins-conservation/",
            "content": "The Iber wetland is the second largest in the world, and it harbors almost 30% of Argentinas total biodiversity. Following a multi-decade effort by local and international NGOs working alongside local and national governments, this powerful spot became a national park in late 2018. For more information on conservation work being carried out there, visit <a target='_blank' href='http://www.rewildingargentina.org/'>rewildingargentina</a> and <a target='_blank' href='https://www.tompkinsconservation.org/'>tompkinsconservation</a>."
        },
        "santa-cruz-area" : {
            "country": "argentina",
            "subtitle": "REWILDING ARGENTINA",
            "lat": "-64.15689204675418",
            "lng": "-48.6049241486501",
            "zoom":"5.5",
            "images" : ["/images/patagonia-slider-1.jpg","/images/patagonia-slider-2.jpg", "/images/patagonia-slider-3.jpg","/images/patagonia-slider-4.jpg","/images/patagonia-slider-5.jpg", "/images/patagonia-slider-6.jpg", "/images/patagonia-slider-7.jpg"],
            "continent" : "South America",
            "defaultLocation" : 'Patagonia National Park',
            "read":"/images/patagonia-slider-read.jpg",
            "readLink":"/journal/patagonia-national-park-rewilding-argentina/",
            "content": "This impressive area houses the only extra-Andean glacier in Argentina, countless mountains, steppe, rivers and lakes, as well as most of the habitat of the precious and endemic Hooded grebe (Podiceps gallardoi), and all the rest of the typical patagonian wildlife. For more information on conservation work being carried out there, visit <a target='_blank' href='http://www.rewildingargentina.org/'>rewildingargentina</a>, <a target='_blank' href='https://www.tompkinsconservation.org/'>tompkinsconservation</a> and <a target='_blank' href='https://avesargentinas.org.ar/'>avesargentinas</a>."
        },
        "torres-del-paine-area" : {
            "country": "chile",
            "subtitle": "Fundacin Cerro Guido and Panthera",
            "lat": "-72",
            "lng": "-50.9049241486501",
            "zoom":"7.8",
            "images" : ["/images/torres-del-paine.jpg","/images/torres-del-paine-1.jpg", "/images/torres-del-paine-2.jpg", "/images/torres-del-paine-3.jpg", "/images/torres-del-paine-4.jpg", "/images/torres-del-paine-5.jpg",  "/images/torres-del-paine-6.jpg"],
            "continent" : "South America",
            "defaultLocation" : 'Torres del Paine',
            "read":"/images/torres-del-paine-read.jpg",
            "readLink":"/journal/puma-fundacion-cerro-guido-and-panthera/",
            "content": "Internationally recognised as one of the most beautiful spots on Earth; full of rivers, mountains and glaciers, it is also said to harbor the biggest Puma (Puma concolor) population in the world. For more information on conservation work being carried out there, visit <a target='_blank' href='www.fundacioncgc.com'>fundacioncgc</a> and <a target='_blank' href='https://panthera.org/'>panthera</a>."
        },
        "andalucia-area" : {
            "country": "spain",
            "subtitle": "CBD HABITAT AND IBERLINCE",
            "lat": "1.9",
            "lng": "39.07",
            "zoom":"5.3",
            "images" : ["/images/andalucia-slider-1.jpg", "/images/andalucia-slider-2.jpg", "/images/andalucia-slider-3.jpg", "/images/andalucia-slider-4.jpg", "/images/andalucia-slider-5.jpg", "/images/andalucia-slider-6.jpg", "/images/andalucia-slider-7.jpg"],
            "continent" : "Europe",
            "defaultLocation" : 'Castilla de la Mancha/Andalucia',
            "read":"/images/andalucia-read.jpg",
            "readLink":"/lynx-cbd-habitat-and-iberlince/",
            "content": "The Iberian Peninsula harbors about 50% of European plant and terrestrial vertebrate species and more than 30% of European endemic species. It is also home to the most endangered cat in the world, the Iberian lynx (Lynx pardinus). For more information on conservation work being carried out there, visit <a target='_blank' href='https://www.cbd-habitat.com/'>cbd-habitat</a> and <a target='_blank' href='https://www.lifelynxconnect.eu/'>lifelynxconnect</a>."
        },
        "aguapey-river-basin":{
            "country": "argentina",
            "subtitle": "province of corrientes, Argentina",
            "lat": "-55.5",
            "lng": "-28.268396793825374",
            "zoom":"8",
            "images" : ["/images/journal-ibera-slider-1.jpg","/images/journal-ibera-slider-2.jpg", "/images/journal-ibera-slider-3.jpg", "/images/journal-ibera-slider-4.jpg"],
            "continent" : "South America",
            "defaultLocation" : 'Aguapey River Basin',
            "read":"/images/field-journals-read.jpg",
            "readLink":"/journal/patagonia-national-park-rewilding-argentina/#",
            "content":"The Aguapey River basin is one of the most biodiverse regions in Argentina and at the same time the least protected. The landscape is characterized by a matrix of natural grasslands with a rich variety of wetlands, palm groves and forests. This mosaic of pampas, wetlands and Atlantic forest, generates an extraordinary diversity, with the presence of numerous endangered and exclusive species. Conservation initiatives are being born to preserve at least part of this amazing hotspot. For more information, visit <a target='_blank' href='http://datazone.birdlife.org/index.php/site/factsheet/19437'>birdlife</a>."
        },
        "peninsula-valdes":{
            "country": "argentina",
            "subtitle": "PUNTA NORTE ORCA RESEARCH",
            "lat": "-63",
            "lng": "-42.46334337165947",
            "zoom":"7.8",
            "images" : ["/images/journal-ibera-slider-1.jpg","/images/journal-ibera-slider-2.jpg", "/images/journal-ibera-slider-3.jpg", "/images/journal-ibera-slider-4.jpg"],
            "continent" : "South America",
            "defaultLocation" : "Peninsula Valdes",
            "read":"/images/field-journals-read.jpg",
            "readLink":"/journal/patagonia-national-park-rewilding-argentina/#",
            "content": "Pennsula Valds in Patagonia is a site of global significance for the conservation of marine mammals. It is home to an important breeding population of the endangered southern right whale as well as important breeding populations of southern elephant seals and southern sea lions. The orcas in this area have developed a unique hunting strategy to adapt to local coastal conditions. For more information on conservation work being carried out there, visit <a target='_blank' href='https://www.pn-orca.org/'>www.pn-orca.org</a>."
        },
        "lago-la-plata":{
            "country": "argentina",
            "subtitle": "southern Patagonia, argentina",
            "lat": "-71",
            "lng": "-44.6049241486501",
            "zoom":"8",
            "images" : ["/images/journal-ibera-slider-1.jpg","/images/journal-ibera-slider-2.jpg", "/images/journal-ibera-slider-3.jpg", "/images/journal-ibera-slider-4.jpg"],
            "continent" : "South America",
            "defaultLocation": "Lago la Plata",
            "read":"/images/field-journals-read.jpg",
            "readLink":"/journal/patagonia-national-park-rewilding-argentina/#",
            "content": "Located in Southern Patagonia, Argentina, La Plata Lakes surface is 14,000 hectares. It is sorrounded by a wide range of mountains of different altitudes and teeming patagonian andean forests which make it a precious habitat for a huge variety of biodiversity and particularly the endangered Huemul (Hippocamelus bisulcus). For more information on conservation work being carried out there, visit <a target='_blank' href='https://www.shoonem.ch/'>www.shoonem.ch</a>."
        },
        "bahia-lomas":{
            "country": "argentina",
            "subtitle": "tIERRA DEL FUEGO, CHILE",
            "lat": "-68.25689204675418",
            "lng": "-52.6049241486501",
            "zoom":"8",
            "images" : ["/images/journal-ibera-slider-1.jpg","/images/journal-ibera-slider-2.jpg", "/images/journal-ibera-slider-3.jpg", "/images/journal-ibera-slider-4.jpg"],
            "continent" : "South America",
            "defaultLocation" : "Bahia Lomas",
            "read":"/images/field-journals-read.jpg",
            "readLink":"/journal/patagonia-national-park-rewilding-argentina/#",
            "content": "Located on the northern chilean side of the Tierra del Fuego Island, Ramsar's second southernmost site lies on the border with Argentina and faces the Magellan Strait. The bay is renowned for its high concentrations of migratory shorebirds from October to March. Large cetaceans have frequently stranded in the flats. The impact of pollution from oil spills and the upcoming green hydrogen industry is big a concern for the greater Magellanic regions ecosystems. For more information on conservation work being carried out there, visit <a target='_blank' href='http://www.bahialomas.cl/'>www.bahialomas.cl</a>."
        }
    };

    // animalPoints = {};
    // var animalPoints = {
    //      'type': 'FeatureCollection',
    //      'features': [
    //          {"type":"Feature",
    //              "properties":{
    //              "animal":"Jaguar",
    //              "place":"ibera-wetlands-area"
    //              },
    //              "geometry":{"coordinates":[-57.46296665630403,-28.50972858916262],"type":"Point"}},
    //          {"type":"Feature",
    //              "properties":{
    //              "animal":"puma",
    //                  "place":"santa-cruz-area"
    //              },
    //              "geometry":{"coordinates":[-73.27984761491335,-50.91368057758825],"type":"Point"}},
    //          {"type":"Feature",
    //              "properties":{
    //                  "animal":"alpaca",
    //                  "place":"santa-cruz-area"
    //              },
    //              "geometry":{"coordinates":[-73.34311755475126,-50.97394201201171],"type":"Point"}},
    //          {"type":"Feature",
    //              "properties":{"animal":"alpaca", "place":"santa-cruz-area"},
    //              "geometry":{"coordinates":[-71.82694504725883,-48.0434994387731],"type":"Point"}},
    //          {"type":"Feature",
    //              "properties":{"animal":"skunk","place":"santa-cruz-area"},
    //              "geometry":{"coordinates":[-71.3469237672863,-48.54286829691525],"type":"Point"}},
    //          {"type":"Feature",
    //              "properties":{"animal":"condor", "place":"santa-cruz-area"},
    //              "geometry":{"coordinates":[-71.35613147807088,-47.03480297718332],"type":"Point"}},
    //          {"type":"Feature",
    //              "properties":{"animal":"puma", "place":"santa-cruz-area"},
    //              "geometry":{"coordinates":[-71.33616595135727,-47.4116577317126],"type":"Point"}},
    //          {"type":"Feature",
    //              "properties":{"animal":"lynx", "place":"santa-cruz-area"},
    //              "geometry":{"coordinates":[-3.9223005419449066,37.45767744818113],"type":"Point"}}
    //      ]
    //  };

    // map.addSource('animalPoints', {
    //     'type': 'geojson',
    //     'data': animalPoints
    // });

    map.addSource('polygons', {
        'type': 'geojson',
        'data': polygons
    });
    map.addSource('initialPoints', {
        'type': 'geojson',
        'data': initialPoints
    });
    map.addLayer({
        'id': 'initialPoints',
        'type': 'symbol',
        'source': 'initialPoints',
        'layout': {
            // 'icon-image' : 'custom-marker'
        },
    });
    map.addLayer({
        'id': 'polygons',
        'type': 'fill',
        'source': 'polygons', // reference the data source
        'layout': {},
        'paint': {
            'fill-color': '#222', // blue color fill
            'fill-opacity': 0.5
        }
    });
// Add a black outline around the polygon.
    map.addLayer({
        'id': 'outline',
        'type': 'line',
        'source': 'polygons',
        'layout': {},
        'paint': {
            'line-color': '#fff',
            'line-width': 0.5
        }
    });


    for (const feature of initialPoints.features) {

        const el = document.createElement('div');
        el.className = 'marker' + ' ' + 'initial';


        var initialPlace = feature.properties.place;
        var initialPlaceName = feature.properties.name;

        initialPlace.replace(/\s+/g, '-').toLowerCase();


        var names = document.createElement('div');
        names.className = 'initialPlace' + ' ' + initialPlace + ' ' + 'marker';

        names.style.backgroundImage = `url(/images/WAWsiteJC-${initialPlace}.png)`;

        names.style.backgroundRepeat = 'no-repeat';

        el.appendChild(names);
        names.innerHTML = `<div class="place-data" data-name="${initialPlace}">${initialPlaceName}</div>`;

        var img = document.createElement('img')
        names.appendChild(img);
        img.src = '/images/pin.png';


// Add markers to the map.
        let initalMarker = new mapboxgl.Marker(names, { anchor: 'center', offset: [0, -40] })
            .setLngLat(feature.geometry.coordinates).addTo(map);
        //
        initalMarker.getElement().addEventListener('click', (e) => {
            console.log(feature);
            areaInfo(feature.properties.place);
            // sliderPop(feature.properties.place);
            // goToArea(feature.properties.place);
        });
        initalMarker.getElement().addEventListener('touchstart', (e) => {
            console.log(feature);
            areaInfo(feature.properties.place);
        })
    };

    // for (const feature of animalPoints.features) {
    //     console.log(feature);
    //     var animal = feature.properties.animal;
    //     let place = feature.properties.place;
    //
    //     // name = name.replace(/\s+/g, '-').toLowerCase();
    //     const el = document.createElement('div');
    //     el.className = 'animal' + ' ' + 'marker' + ' ' + place;
    //
    //
    //
    //     var names = document.createElement('div');
    //
    //     names.style.backgroundImage = `url(/images/WAWsiteJC-${animal}.png)`;
    //     names.style.backgroundRepeat = 'no-repeat';
    //
    //     el.appendChild(names);
    //     names.className = 'animal' + ' ' + 'name' + ' ' + animal + ' ' + place;
    //     names.setHTML(
    //         `<div class="animal" data-name="${animal}">${animal}</div>`
    //     );
    //     var img = document.createElement('img')
    //     names.appendChild(img);
    //     img.src = '/images/pin.png';
    //
    //
    //     // el.id = feature.geometry.title;
    //     // make a marker for each feature and add to the map
    //     new mapboxgl.Marker(names, {anchor: 'center', offset: [0, -25]}).setLngLat(feature.geometry.coordinates).addTo(map);
    //
    //     // $('.marker').on('click', function(el){
    //     //     var loc = $(this).attr('class');
    //     //     console.log(loc);
    //     // })
    // };

    // map.on('click', 'animals', (e) =>{
    //     area = e.features[0].properties.place;
    //     if(area[0].id == `santa-cruz-area`){
    //         var images = document.getElementsByClassName('images');
    //         var image = document.createElement('img');
    //         images.appendChild(image);
    //     }
    // });

    function areaInfo(e){
        console.log(e);
        // console.log(e);
        // e.preventDefault();
        // var place = e.features[0].properties.place;
        // console.log(e.features[0].properties);
        var placeStr = e;

        console.log(locationsObj[placeStr]);
        if(locationsObj[placeStr].isActive) {
            return false;
        } else {
            sliderPop(placeStr);
            goToArea(placeStr);

            // Object.keys(locationsObj).forEach(key => {
            //     let obj = locationsObj[key];
            //     obj.isActive = false;
            // });
            resetActiveLocs();

            locationsObj[placeStr].isActive = true;
        }

        var cont = locationsObj[placeStr].continent;
        var area = document.getElementsByClassName('popup-inner');

        // $('.animal').addClass('visible');
        // $("#"+ place + '.popup-inner').slideDown();
        $('.initialPlace').addClass('hidden');
        $('.initialPlace' + "."+placeStr).removeClass('hidden');
        $('.initial').addClass('hidden');
        $('.popup').addClass('open');
        $('.popup .images').show();
        $('.back').show();

        $('.continent-wrap').hide();
        $(`.${placeStr}.popup-text`).show();

        map.scrollZoom.disable();
        map.dragPan.disable();
        map.touchZoomRotate.disable();

        var back = document.getElementById('back');
        back.innerHTML=`back to ${cont}`;
        back.className = (`${cont}`).toLowerCase();

        var area = $('.popup-inner');
        area.attr('id',`${placeStr}`);
        console.log('true');
        $("#"+ placeStr + '.popup-inner').slideDown();

        var location = locationsObj[placeStr].defaultLocation;
        var subtitleText = locationsObj[placeStr].subtitle;
        var content = locationsObj[placeStr].content;
        var journalRead = locationsObj[placeStr].read;
        var journalReadLink = locationsObj[placeStr].readLink;

        var title = document.getElementsByClassName('title');
        title[0].innerHTML = `${location}`;
        var subtitle = document.getElementsByClassName('subtitle');
        subtitle[0].innerHTML=`${subtitleText}`;
        var journalImage = document.getElementsByClassName('journal-read');
        journalImage[0].href = journalReadLink;
        var journalImageElement = journalImage[0].childNodes[0].nextSibling;
        journalImageElement.src = journalRead;


        var popupText = document.getElementsByClassName('popup-text');
        var comingSoonText = document.getElementsByClassName('coming-soon');
        popupText[0].className = `popup-text ${placeStr}`;

        comingSoonText[0].className = `coming-soon ${placeStr}`;
        popupText[0].innerHTML = `${content}`;

        $("."+ placeStr + '.popup-text').slideDown();
    }
    //
    function sliderPop(e){
        var placeStr = e;
        var images = locationsObj[placeStr].images;
        console.log(locationsObj[e]);
        var slick = $('#slider');
        for (const image of images) {
            $('.slider.images').slick('slickAdd', '<img style="width: 100%;" src=' + image + '>');
        }
        slick.slick('refresh');
    }

    function setPaint(e){
        console.log(e);

        map.setPaintProperty(e, 'fill-opacity',  [
            'interpolate',
// Set the exponential rate of change to 0.5
            ['exponential', 0.5],
            ['zoom'],
// When zoom is 10, buildings will be 100% transparent.
            6,
            1,
        ]);
    }

    map.on('click', 'polygons', (e) => {
        areaInfo(e.features[0].properties.place);
        // setPaint(e.features[0]);
        //
        // if(place == 'ibera-wetlands-area'){
        //     var iberaWetlands = ['/images/journal-ibera-slider-1.jpg', '/images/journal-ibera-slider-2.jpg','/images/journal-ibera-slider-3.jpg', '/images/journal-ibera-slider-4.jpg'];
        //     var area = $('.popup-inner');
        //     area.attr('id',`${place}`);
        //     console.log('true');
        //     $("#"+ place + '.popup-inner').slideDown();
        //     $('#ibera-wetlands-area .slider').addClass('open');
        //     for (const iberaWetland of iberaWetlands){
        //
        //         var images = document.getElementsByClassName('ibera-wetlands-area img');
        //
        //         var image = $('#ibera-wetlands-area .images').append('<img src=' + iberaWetland + '>');
        //         $('#ibera-wetlands-area .images img').attr('src', iberaWetland);
        //     }
        // }

    });


    $('.back').on('click', function(e){
        // var place = polygons.features[0].properties.place;
        // map.setLngLat(-45.37257355955616, -21.968033674683838);
        resetActiveLocs();
        $('.popup').removeClass('open');
        $('.animal').removeClass('visible');
        $('.initialPlace').removeClass('hidden');
        $('.initial').removeClass('hidden');
        $('.back').hide();
        map.setMinZoom(2);
        $('.continent-wrap').show();
        $('.popup-inner').slideUp();
        $('.popup-text').hide();
        $('.popup .images').hide();

        map.scrollZoom.enable();
        map.dragPan.enable();
        map.touchZoomRotate.enable({around: 'center'});

        var back = document.getElementById('back');
        back.innerHTML = ' ';
        // console.log(back);
        $('.slider.images').slick('removeSlide', null, null, true);

        if(back.classList.contains('europe')){
            console.log('test eu')
            europe();
        }
        if(back.classList.contains('america')){
            southAmerica();
        }
        var slick = $('#slider');
        slick.slick('refresh');
    });


    $('.continents .continent-name').on('click', function(){
        $('.continents .continent-name').removeClass('active');
        var activeCont = $(this).children('h2').text();
        $('.current-continent h2').text(activeCont);
        $(this).addClass('active');
        // $(this).children('h2').attr('id', ' ');
        // $('.continent-info .swap-text').text(' ');
        var currentText = $(this).children('p').html()
        console.log(currentText);
        $('.continent-info .swap-text').html(currentText);
        var id = $('.continents h2').attr('id');
        $('.continents .continent-name h2').addClass(`${id}`);

        // $('.continent-info').addClass(($(this).text()).toLowerCase());
        // console.log($('.current-continent h2').attr('id'));
        // $(this).children('h2').id($(this.text()));
    })

    function europe(){
        map.flyTo({
            center: [-4.657511208316919,39.70934455996375],
            zoom: 5.5,
            bearing: 0,
            speed: 1, // make the flying slow
            curve: 1, // change the speed at which it zooms out

// This can be any easing function: it takes a number between
// 0 and 1 and returns another number between 0 and 1.
            easing: (t) => t,

// this animation is considered essential with respect to prefers-reduced-motion
            essential: true
        });
    }

    $('#europe').on('click', function(e){
        console.log('click');
        europe(e);
    });

   function southAmerica(){
       map.flyTo({
           center: [-45.37257355955616, -21.968033674683838],
           zoom: 2.5,
           bearing: 0,
           speed: 1, // make the flying slow
           curve: 1, // change the speed at which it zooms out

// This can be any easing function: it takes a number between
// 0 and 1 and returns another number between 0 and 1.
           easing: (t) => t,

// this animation is considered essential with respect to prefers-reduced-motion
           essential: true
       });
   }
    $('#south-america').on('click', function(e){
        southAmerica();
    });

    function goToArea(e){
        var placeStr = e;
        var lat = locationsObj[placeStr].lat;
        var lng = locationsObj[placeStr].lng;
        var zoom = locationsObj[placeStr].zoom;

        // map.setMinZoom(5);
        map.flyTo({
            center: [lat, lng],
            zoom: zoom,
            bearing: 0,
            speed: 1, // make the flying slow
            curve: 1, // change the speed at which it zooms out
            easing: (t) => t,
            essential: true
        })
    };

    function resetActiveLocs () {
        Object.keys(locationsObj).forEach(key => {
            let obj = locationsObj[key];
            obj.isActive = false;
        });
    }
});





$('.slider').slick({
    dots: false,
    infinite: true,
    cssEase: 'linear',
    slidesToScroll:1,
    slidesToShow: 3,
    prevArrow: $('.prev'),
    nextArrow: $('.next')
});


var slideIndex = 4;


// The following values can be changed to control rotation speed:

// At low zooms, complete a revolution every two minutes.
const secondsPerRevolution = 120;
// Above zoom level 5, do not rotate.
const maxSpinZoom = 5;
// Rotate at intermediate speeds between zoom levels 3 and 5.
const slowSpinZoom = 3;

let userInteracting = false;
let spinEnabled = false;

function spinGlobe() {
    const zoom = map.getZoom();
    if (spinEnabled && !userInteracting && zoom < maxSpinZoom) {
        let distancePerSecond = 360 / secondsPerRevolution;
        if (zoom > slowSpinZoom) {
// Slow spinning at higher zooms
            const zoomDif =
                (maxSpinZoom - zoom) / (maxSpinZoom - slowSpinZoom);
            distancePerSecond *= zoomDif;
        }
        const center = map.getCenter();
        center.lng -= distancePerSecond;
// Smoothly animate the map over one second.
// When this animation is complete, it calls a 'moveend' event.
        map.easeTo({ center, duration: 1000, easing: (n) => n });
    }
}

// Pause spinning on interaction
map.on('mousedown', () => {
    userInteracting = true;
});

// Restart spinning the globe when interaction is complete
map.on('mouseup', () => {
    userInteracting = false;
    spinGlobe();
});

// These events account for cases where the mouse has moved
// off the map, so 'mouseup' will not be fired.
map.on('dragend', () => {
    userInteracting = false;
    spinGlobe();
});
map.on('pitchend', () => {
    userInteracting = false;
    spinGlobe();
});
map.on('rotateend', () => {
    userInteracting = false;
    spinGlobe();
});

// When animation is complete, start spinning if there is no ongoing interaction
map.on('moveend', () => {
    spinGlobe();
});

map.on('dblclick', e => {
    console.log(e)
})
map.on('click', e => {
    console.log(e)
})
map.doubleClickZoom.disable();

document.getElementById('btn-spin').addEventListener('click', (e) => {
    spinEnabled = !spinEnabled;
    if (spinEnabled) {
        spinGlobe();
        e.target.innerHTML = 'Pause rotation';
    } else {
        map.stop(); // Immediately end ongoing animation
        e.target.innerHTML = 'Start rotation';
    }
});

spinGlobe();



// $('.slider.open').slick({
//     arrows: true,
//     dots:false,
//     slidesToScroll:1,
//     slidesToShow: 3,
//     adaptiveHeight: false,
//     fade: true,
//     autoplay: true,
//     autoplaySpeed: 8000,
// });
// // Scene
// const scene = new THREE.Scene()
// const axesHelper = new THREE.AxesHelper( 5 );
// scene.add( axesHelper );
// /**
//  * Object
//  */
// const geometry = new THREE.BoxGeometry(1, 1, 1)
// const material = new THREE.MeshBasicMaterial({ color: 0xff0000 })
// const mesh = new THREE.Mesh(geometry, material)
// scene.add(mesh)
//
// /**
//  * Sizes
//  */
// const sizes = {
//     width: 800,
//     height: 600
// }
//
// /**
//  * Camera
//  */
// const camera = new THREE.PerspectiveCamera(75, sizes.width / sizes.height)
// camera.position.z = 3
// scene.add(camera)
//
// /**
//  * Renderer
//  */
// const renderer = new THREE.WebGLRenderer({
//     canvas: canvas
// })
// renderer.setSize(sizes.width, sizes.height)
// renderer.render(scene, camera)

/*
 * Copyright (c) 2019. OGK Creative
 */


    // Mobile Header
    $(".hamburger").on("click", function() {
        $(this).toggleClass("open");
        $(".site-content").toggleClass("open");
        $(".nav-menu").toggleClass("open");
        $('body').toggleClass('fixed');
    });
    var fadeInSpeed = 700;

    $('.inview-fadeUp').on('inview', function (event, isInView) {
        if (isInView) {
            // element is now visible in the viewport
            $(this).addClass("fadeUp");
        } else {
            // element has gone out of viewport
        }
    });


    $('.portfolio-item').on('click', function(){
        var target =  $(this).data('name');
        var openPop = "." + target;
        var memberPopup = $('.port-popup');
        $(openPop).addClass('open');
        $('body').addClass("fixed");
    });
    $('.x').on('click', function(){
        $('.port-popup').removeClass('open');
        $('body').removeClass('fixed');
    })
    $('body.fixed').on('click', function(){
        $('body').removeClass('fixed');
        $('.port-popup').removeClass('open');
    });

    $('.nav-name').on('mouseover', function(){
        $('.animate').removeClass('active');
        var target =  $(this).data('name');
        var navItem = "." + target;
        $(navItem).addClass('active');
    });
    $('.nav-name').on('mouseleave', function(){
        $('.animate').removeClass('active');
        $('.home').addClass('active');
    });



var scrollObject = {
    y: window.pageYOffset
}

var getScrollPosition = (e) => {

    var prevY = scrollObject.y

    scrollObject = {
        y: window.pageYOffset
    }

    if(scrollObject.y > 5) {
        document.body.classList.add('scrolled')
        if(prevY >= scrollObject.y) {
            document.body.classList.add('scrolled-up')
        }
        else {
            document.body.classList.remove('scrolled-up')
        }
    } else {
        document.body.classList.remove('scrolled','scrolled-up')
    }
}

window.onscroll = getScrollPosition;
//default JS Setting
// var rellax = new Rellax('.rellax', {
//     breakpoints:[576, 768, 1201]
// });


